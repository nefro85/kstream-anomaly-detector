version: '1.0'
kind: kafka-ingest
kafka:
  bootstrap.servers: kafka:9092
ingest:
  templates:
    - name: measurements.tpl
      content: |+
        {
          "temperature": ${T},
          "timestamp": ${__TIMESTAMP},
          "roomId": "${R}",
          "thermometerId": "${D}"
        }
  value_sets:
    - name: my-set
      attributes: [T, R, D]
      values:
        - ["${rand=-30..60}.${rand=0..100}", "room-01", "dev-01"]
        - ["${rand=-30..60}.${rand=0..100}", "room-01", "dev-02"]
        - ["${rand=-30..60}.${rand=0..100}", "room-02", "dev-01"]
        - ["${rand=-30..60}.${rand=0..100}", "room-02", "dev-02"]
        - ["${rand=-30..60}.${rand=0..100}", "room-03", "dev-01"]
        - ["${rand=-30..60}.${rand=0..100}", "room-03", "dev-02"]
      repeat: 5

  topics:
    - name: temp.measurements
      value_set: my-set
      entries:
        - value_template:
            name: measurements.tpl
